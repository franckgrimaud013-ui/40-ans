<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Les Tra√Ætres ‚Äî Accueil</title>
  <style>
    :root{
      --bg:#070c16; --text:#eaf0f8; --mut:#cfd5dc; --gold:#d4af37;
      --blue:#0e2a4d; --blue2:#12345a; --red:#5a0f1b; --red2:#6e1421;
    }
    *{ box-sizing:border-box }
    body{ margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    a{ color:var(--gold); text-decoration:none }
    a:hover{ text-decoration:underline }
    .wrap{ max-width:980px; margin:0 auto; padding:18px }
    .center{ text-align:center }
    .mut{ color:var(--mut) }
    .btn{ display:inline-block; padding:12px 18px; border-radius:12px; background:var(--gold); color:#000; border:none; cursor:pointer; font-weight:800; }
    .btn:active{ transform:translateY(1px) }
    .panel{ background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12); border-radius:16px; padding:16px }
    h1,h2{ margin:0 0 10px }
    .lg{ font-size:18px }
    .sp{ height:14px }
    /* Secret skip */
    .secret-fixed{
      position:fixed; top:12px; left:12px; width:20px; height:20px; border-radius:50%;
      z-index:9999; cursor:pointer; opacity:.25;
      background:radial-gradient(circle at 30% 30%, rgba(212,175,55,.95) 0%, rgba(212,175,55,.45) 45%, rgba(0,0,0,0) 60%);
      box-shadow:0 0 14px rgba(212,175,55,.55), 0 0 28px rgba(212,175,55,.35);
    }
    /* Pager */
    .page{ min-height:100vh; display:none; opacity:0; transition:opacity .5s ease; }
    .page.show{ display:block; opacity:1; }
    .introText{ max-width:780px; margin:0 auto; line-height:1.55; }
    /* Page 3 layout */
    .grid{ display:grid; gap:12px }
    @media(min-width:760px){ .grid{ grid-template-columns:1fr 1fr } }
    .card{ background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.1); border-radius:14px; padding:12px }
    .card h3{ margin:0 0 6px; color:#ffd98a }
    .card ul{ margin:6px 0 0 18px }
    /* Role panels */
    .role-wrap{ margin-top:16px; display:none }
    .role-box{ border-radius:16px; padding:16px; border:1px solid rgba(255,255,255,.15) }
    .role-blue{ background:linear-gradient(180deg, var(--blue), var(--blue2)) }
    .role-red{  background:linear-gradient(180deg, var(--red), var(--red2)) }
    .role-title{ margin:0 0 6px; font-size:22px; font-weight:900 }
    .role-sub{ margin:0; color:#f3f6ff }
    .role-actions{ margin-top:12px; text-align:center }
    .cta-traitor{ display:inline-block; padding:12px 16px; border-radius:12px; background:#ffd87a; color:#000; font-weight:900 }
  </style>
</head>
<body>
  <!-- Secret: passer direct √† la page 3 -->
  <div id="secretFixed" class="secret-fixed" title="Passer"></div>

  <!-- PAGE 1 -->
  <section id="p1" class="page show">
    <div class="wrap center">
      <h1 style="color:#ffd87a; text-shadow:0 0 14px rgba(212,175,55,.25)">Vous avez √©t√© convi√©s par Franck‚Ä¶</h1>
      <p class="lg">Un week-end pas comme les autres vous attend.<br>üîä Mettez le son‚Ä¶ car chaque d√©tail compte.</p>
      <div class="sp"></div>
      <button id="startBtn" class="btn" type="button">Lancez‚Äëvous</button>
    </div>
  </section>

  <!-- PAGE 2 -->
  <section id="p2" class="page">
    <div class="wrap center">
      <h2 style="color:#ffd87a">Introduction</h2>
      <div class="sp"></div>
      <div class="introText panel">
        <p>Bienvenue ! Vous allez vivre une exp√©rience immersive inspir√©e du jeu des Tra√Ætres. Jouez, discutez, observez‚Ä¶ et faites vos choix.</p>
        <p>Certains d‚Äôentre vous sont <b>Loyaux</b> : votre mission est de prot√©ger le groupe. D‚Äôautres sont des <b>Tra√Ætres</b> : ils agissent en secret la nuit. Le matin, le groupe d√©couvre la victime de la nuit ; le jour, on d√©bat et on vote.</p>
        <p>Gardez la bonne entente : on est entre amis, tout √ßa pour pimenter le week-end üòâ</p>
      </div>
      <div class="sp"></div>
      <button id="enterBtn" class="btn" type="button">Entrer dans le jeu</button>
    </div>
  </section>

  <!-- PAGE 3 -->
  <section id="p3" class="page">
    <div class="wrap">
      <section class="panel">
        <h2 class="center">Le d√©roul√© du week-end</h2>
        <p class="center mut">Tu vas bient√¥t d√©couvrir ton r√¥le. Voici comment va se d√©rouler l‚Äôexp√©rience ‚Äî on est entre amis, le but est de s‚Äôamuser üòâ</p>
        <div class="grid">
          <div class="card">
            <h3>üóìÔ∏è Le petit planning</h3>
            <ul>
              <li><b>Vendredi soir</b> : conseil et vote d‚Äô√©limination.</li>
              <li><b>Nuit ven ‚Üí sam</b> : les Tra√Ætres choisissent discr√®tement une victime via leur lien.</li>
              <li><b>Samedi matin</b> : annonce au groupe du r√©sultat de la nuit.</li>
              <li><b>Samedi midi</b> : nouveau conseil et vote.</li>
              <li><b>Samedi soir</b> : conseil et vote.</li>
              <li><b>Nuit sam ‚Üí dim</b> : les Tra√Ætres √©liminent √† nouveau via leur lien.</li>
              <li><b>Dimanche matin</b> : annonce au groupe de la victime de la nuit.</li>
            </ul>
          </div>
          <div class="card">
            <h3>üé≠ Esprit & r√®gles</h3>
            <ul>
              <li>Les Tra√Ætres jouent <b>en secret</b> via un lien priv√© (personne ne sait qui ils sont).</li>
              <li>Les Loyaux observent, discutent et votent avec strat√©gie.</li>
              <li>Pas de prise de t√™te : les √©crans cl√©s s‚Äôaffichent au bon moment pour le groupe.</li>
              <li>On garde la <b>bonne entente</b> : fun & fair-play.</li>
            </ul>
          </div>
        </div>
        <div class="center" style="margin-top:14px">
          <button id="discoverBtn" class="btn" type="button">üîç D√©couvre ton r√¥le</button>
        </div>
      </section>

      <!-- Role panels -->
      <section id="roleWrap" class="role-wrap">
        <div id="roleBlue" class="role-box role-blue" style="display:none">
          <h3 class="role-title">Ton r√¥le : LOYAL üõ°Ô∏è</h3>
          <p class="role-sub">Observe, discute, vote avec strat√©gie ‚Äî et prot√®ge le groupe.</p>
        </div>
        <div id="roleRed" class="role-box role-red" style="display:none">
          <h3 class="role-title">Ton r√¥le : TRA√éTRE üïµÔ∏è‚Äç‚ôÇÔ∏è</h3>
          <p class="role-sub">Joue en secret. Garde ton lien sous la main pour voter la nuit.</p>
          <div class="role-actions">
            <a id="voteCta" class="cta-traitor" href="#" target="_blank" rel="noopener">Voter la nuit pour √©liminer un Loyal</a>
          </div>
        </div>
      </section>
    </div>
  </section>

  <script>
    // Pager with fade
    const pages = ['p1','p2','p3'].map(id=>document.getElementById(id));
    function go(i){
      pages.forEach((p,idx)=>{
        if(idx===i){ p.classList.add('show'); }
        else { p.classList.remove('show'); }
      });
    }
    document.getElementById('startBtn').addEventListener('click', ()=>go(1));
    document.getElementById('enterBtn').addEventListener('click', ()=>go(2));

    // Secret button jumps to page 3
    document.getElementById('secretFixed').addEventListener('click', ()=>go(2));

    // Token parsing
    function parseToken(){
      try{
        const p = new URLSearchParams(location.search||'');
        if(p.has('t')) return JSON.parse(decodeURIComponent(atob(p.get('t'))));
      }catch(e){}
      return null;
    }

    // Discover role behavior
    (function(){
      const btn = document.getElementById('discoverBtn');
      const wrap = document.getElementById('roleWrap');
      const blue = document.getElementById('roleBlue');
      const red  = document.getElementById('roleRed');
      const voteCta = document.getElementById('voteCta');

      function showRole(){
        const pay = parseToken();
        wrap.style.display='block';
        blue.style.display='none'; red.style.display='none';
        if(pay && pay.role==='TRAITRE'){
          red.style.display='block';
          // forward token to traitor_vote.html
          const t = new URLSearchParams(location.search).get('t') || '';
          voteCta.href = 'traitor_vote.html' + (t ? ('?t='+encodeURIComponent(t)) : '');
        } else if(pay && pay.role){
          blue.style.display='block';
        } else {
          blue.style.display='block';
          blue.querySelector('.role-sub').textContent = "Ouvre ton lien d‚Äôinvitation personnel pour voir ton r√¥le.";
        }
        // scroll into view smoothly
        setTimeout(()=>{ wrap.scrollIntoView({behavior:'smooth', block:'start'}); }, 50);
      }
      btn.addEventListener('click', showRole);
    })();
  </script>
</body>
</html>
